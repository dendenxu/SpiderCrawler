import cv2
import scrapy
import detector
import numpy as np
import matplotlib.pyplot as plt
import requests as rq

already_here = ['beautiful-face-female-girl-41533.jpeg', 'box-christmas-claus-cute-41940.jpeg', 'brown-brunette-female-finger-41551.jpeg', 'exercise-weight-woman-sport.jpg', 'floral-knife-cherry-blossom-flower-spring-158001.jpeg', 'laughter-fun-happiness-boy-51009.jpeg', 'pexels-photo-1004877.jpeg', 'pexels-photo-1005399.jpeg', 'pexels-photo-1006076.jpeg', 'pexels-photo-1006195.png', 'pexels-photo-1006202.jpeg', 'pexels-photo-1024311.jpeg', 'pexels-photo-1035671.jpeg', 'pexels-photo-1035691.jpeg', 'pexels-photo-1036627.jpeg', 'pexels-photo-1037915.jpeg', 'pexels-photo-1049317.jpeg', 'pexels-photo-1054251.jpeg', 'pexels-photo-1056923.png', 'pexels-photo-1057063.jpeg', 'pexels-photo-1057094.jpeg', 'pexels-photo-1057098.jpeg', 'pexels-photo-1057118.jpeg', 'pexels-photo-1057141.jpeg', 'pexels-photo-1057160.jpeg', 'pexels-photo-1057220.jpeg', 'pexels-photo-1057222.jpeg', 'pexels-photo-1065022.jpeg', 'pexels-photo-1066116.jpeg', 'pexels-photo-1066137.jpeg', 'pexels-photo-1066138.jpeg', 'pexels-photo-1066286.jpeg', 'pexels-photo-1066287.jpeg', 'pexels-photo-1066331.jpeg', 'pexels-photo-1071968.jpeg', 'pexels-photo-1072036.jpeg', 'pexels-photo-1073097.jpeg', 'pexels-photo-1080230.jpeg', 'pexels-photo-1080382.jpeg', 'pexels-photo-108261.jpeg', 'pexels-photo-1098657.jpeg', 'pexels-photo-1102343.jpeg', 'pexels-photo-1103063.jpeg', 'pexels-photo-1104000.jpeg', 'pexels-photo-1109637.jpeg', 'pexels-photo-1122679.jpeg', 'pexels-photo-1126662.jpeg', 'pexels-photo-1130625.jpeg', 'pexels-photo-1130753.jpeg', 'pexels-photo-1131501.jpeg', 'pexels-photo-1137965.jpeg', 'pexels-photo-1140746.jpeg', 'pexels-photo-1143793.jpeg', 'pexels-photo-1143921.jpeg', 'pexels-photo-1144170.jpeg', 'pexels-photo-1146352.jpeg', 'pexels-photo-1152646.jpeg', 'pexels-photo-1153367.jpeg', 'pexels-photo-1153370.jpeg', 'pexels-photo-1153372.jpeg', 'pexels-photo-1165667.jpeg', 'pexels-photo-1167134.jpeg', 'pexels-photo-1180017.jpeg', 'pexels-photo-1181338.jpeg', 'pexels-photo-1181424.jpeg', 'pexels-photo-1181436.jpeg', 'pexels-photo-1181475.jpeg', 'pexels-photo-1181478.jpeg', 'pexels-photo-1181514.jpeg', 'pexels-photo-1181521.jpeg', 'pexels-photo-1181524.jpeg', 'pexels-photo-1181630.jpeg', 'pexels-photo-1181631.jpeg', 'pexels-photo-1181633.jpeg', 'pexels-photo-1181686.jpeg', 'pexels-photo-1181694.jpeg', 'pexels-photo-1181724.jpeg', 'pexels-photo-1181725.jpeg', 'pexels-photo-1181742.jpeg', 'pexels-photo-1191524.jpeg', 'pexels-photo-1195110.jpeg', 'pexels-photo-1195111.jpeg', 'pexels-photo-1202302.jpeg', 'pexels-photo-1214304.jpeg', 'pexels-photo-1236678.jpeg', 'pexels-photo-1239291.jpeg', 'pexels-photo-1252246.jpeg', 'pexels-photo-1254450.jpeg', 'pexels-photo-1263328.jpeg', 'pexels-photo-1266193.jpeg', 'pexels-photo-1266642.jpeg', 'pexels-photo-1266760.jpeg', 'pexels-photo-1267315.jpeg', 'pexels-photo-1267321.jpeg', 'pexels-photo-1267347.jpeg', 'pexels-photo-1267348.jpeg', 'pexels-photo-1267369.jpeg', 'pexels-photo-1268798.jpeg', 'pexels-photo-1271702.jpeg', 'pexels-photo-1279907.jpeg', 'pexels-photo-1291482.jpeg', 'pexels-photo-1292684.jpeg', 'pexels-photo-1306557.jpeg', 'pexels-photo-1310476.jpeg', 'pexels-photo-1310477.jpeg', 'pexels-photo-1310485.jpeg', 'pexels-photo-1310488.jpeg', 'pexels-photo-1310518.jpeg', 'pexels-photo-1310526.jpeg', 'pexels-photo-1310528.jpeg', 'pexels-photo-1312994.jpeg', 'pexels-photo-1322498.jpeg', 'pexels-photo-1325528.jpeg', 'pexels-photo-1329864.jpeg', 'pexels-photo-1329879.jpeg', 'pexels-photo-135013.jpeg', 'pexels-photo-1350606.jpeg', 'pexels-photo-1350663.jpeg', 'pexels-photo-1354225.jpeg', 'pexels-photo-1364294.jpeg', 'pexels-photo-1367270.jpeg', 'pexels-photo-1367278.jpeg', 'pexels-photo-1372135.jpeg', 'pexels-photo-1374511.jpeg', 'pexels-photo-1380596.jpeg', 'pexels-photo-1381556.jpeg', 'pexels-photo-1381558.jpeg', 'pexels-photo-1390130.jpeg', 'pexels-photo-1390132.jpeg', 'pexels-photo-1405739.jpeg', 'pexels-photo-1406341.jpeg', 'pexels-photo-1406762.jpeg', 'pexels-photo-1407674.jpeg', 'pexels-photo-1411694.jpeg', 'pexels-photo-1414792.jpeg', 'pexels-photo-1416736.jpeg', 'pexels-photo-1417249.jpeg', 'pexels-photo-1420695.jpeg', 'pexels-photo-1438444.jpeg', 'pexels-photo-1438523.jpeg', 'pexels-photo-1440399.jpeg', 'pexels-photo-1440895.jpeg', 'pexels-photo-1447003.jpeg', 'pexels-photo-1447939.jpeg', 'pexels-photo-1448258.jpeg', 'pexels-photo-1449667.jpeg', 'pexels-photo-1452129.jpeg', 'pexels-photo-1452783.jpeg', 'pexels-photo-1452789.jpeg', 'pexels-photo-1452954.jpeg', 'pexels-photo-1453986.jpeg', 'pexels-photo-1462543.jpeg', 'pexels-photo-1462638.jpeg', 'pexels-photo-1462639.jpeg', 'pexels-photo-1468379.jpeg', 'pexels-photo-1468380.jpeg', 'pexels-photo-1468381.jpeg', 'pexels-photo-1469582.jpeg', 'pexels-photo-1475417.jpeg', 'pexels-photo-1475422.jpeg', 'pexels-photo-1480357.jpeg', 'pexels-photo-1484494.jpeg', 'pexels-photo-1484794.jpeg', 'pexels-photo-1486676.jpeg', 'pexels-photo-1487080.jpeg', 'pexels-photo-1488318.jpeg', 'pexels-photo-1494360.jpeg', 'pexels-photo-1494377.jpeg', 'pexels-photo-1498337.jpeg', 'pexels-photo-1510526.jpeg', 'pexels-photo-1520760.jpeg', 'pexels-photo-1520903.jpeg', 'pexels-photo-1546136.jpeg', 'pexels-photo-1546139.jpeg', 'pexels-photo-1546600.jpeg', 'pexels-photo-1546732.jpeg', 'pexels-photo-1548775.jpeg', 'pexels-photo-1549438.jpeg', 'pexels-photo-1558066.jpeg', 'pexels-photo-1558067.jpeg', 'pexels-photo-1559920.jpeg', 'pexels-photo-1560303.jpeg', 'pexels-photo-1560551.jpeg', 'pexels-photo-1561798.jpeg', 'pexels-photo-1564106.jpeg', 'pexels-photo-1569079.jpeg', 'pexels-photo-156921.jpeg', 'pexels-photo-1572938.jpeg', 'pexels-photo-1582641.jpeg', 'pexels-photo-1587009.jpeg', 'pexels-photo-1587619.jpeg', 'pexels-photo-1588303.jpeg', 'pexels-photo-1600004.jpeg', 'pexels-photo-1600010.jpeg', 'pexels-photo-1605042.jpeg', 'pexels-photo-1615806.jpeg', 'pexels-photo-1616551.jpeg', 'pexels-photo-1617610.jpeg', 'pexels-photo-1618592.jpeg', 'pexels-photo-1620807.jpeg', 'pexels-photo-1620815.jpeg', 'pexels-photo-1627819.jpeg', 'pexels-photo-1635842.jpeg', 'pexels-photo-1638403.jpeg', 'pexels-photo-1644910.jpeg', 'pexels-photo-1645500.jpeg', 'pexels-photo-1649656.jpeg', 'pexels-photo-1650092.jpeg', 'pexels-photo-1653219.jpeg', 'pexels-photo-1653220.jpeg', 'pexels-photo-1653222.jpeg', 'pexels-photo-1653895.jpeg', 'pexels-photo-1656669.jpeg', 'pexels-photo-1657516.jpeg', 'pexels-photo-1661465.jpeg', 'pexels-photo-1662645.jpeg', 'pexels-photo-1666073.jpeg', 'pexels-photo-1667512.jpeg', 'pexels-photo-1670259.jpeg', 'pexels-photo-1674077.jpeg', 'pexels-photo-1680624.jpeg', 'pexels-photo-1680803.jpeg', 'pexels-photo-1682789.jpeg', 'pexels-photo-1684724.jpeg', 'pexels-photo-1684864.jpeg', 'pexels-photo-1685171.jpeg', 'pexels-photo-1693590.jpeg', 'pexels-photo-1693746.jpeg', 'pexels-photo-1699159.jpeg', 'pexels-photo-1701278.jpeg', 'pexels-photo-1701279.jpeg', 'pexels-photo-1706910.jpeg', 'pexels-photo-1706912.jpeg', 'pexels-photo-1710005.jpeg', 'pexels-photo-1710661.jpeg', 'pexels-photo-1729236.jpeg', 'pexels-photo-1729455.jpeg', 'pexels-photo-1734184.jpeg', 'pexels-photo-1734185.jpeg', 'pexels-photo-1734202.jpeg', 'pexels-photo-1734220.jpeg', 'pexels-photo-1734237.jpeg', 'pexels-photo-1734240.jpeg', 'pexels-photo-1738545.jpeg', 'pexels-photo-1739782.jpeg', 'pexels-photo-1739842.jpeg', 'pexels-photo-1751167.jpeg', 'pexels-photo-1752134.jpeg', 'pexels-photo-1755205.jpeg', 'pexels-photo-1756165.jpeg', 'pexels-photo-1756168.jpeg', 'pexels-photo-1756185.jpeg', 'pexels-photo-1756759.png', 'pexels-photo-1769665.jpeg', 'pexels-photo-1770735.jpeg', 'pexels-photo-1776862.jpeg', 'pexels-photo-1787156.jpeg', 'pexels-photo-1789921.jpeg', 'pexels-photo-1796412.jpeg', 'pexels-photo-1807104.jpeg', 'pexels-photo-1807105.jpeg', 'pexels-photo-1813269.jpeg', 'pexels-photo-1816616.jpeg', 'pexels-photo-1816642.jpeg', 'pexels-photo-1816654.jpeg', 'pexels-photo-1820574.jpeg', 'pexels-photo-1820575.jpeg', 'pexels-photo-1820658.jpeg', 'pexels-photo-1820919.jpeg', 'pexels-photo-1820935.jpeg', 'pexels-photo-1820961.jpeg', 'pexels-photo-1820987.jpeg', 'pexels-photo-1822828.jpeg', 'pexels-photo-1826347.jpeg', 'pexels-photo-1827522.jpeg', 'pexels-photo-1828005.jpeg', 'pexels-photo-1829150.jpeg', 'pexels-photo-1830910.jpeg', 'pexels-photo-1833343.jpeg', 'pexels-photo-1835912.jpeg', 'pexels-photo-1835913.jpeg', 'pexels-photo-1835915.jpeg', 'pexels-photo-1842867.jpeg', 'pexels-photo-1842868.jpeg', 'pexels-photo-1842884.jpeg', 'pexels-photo-1843883.jpeg', 'pexels-photo-1843895.jpeg', 'pexels-photo-1843896.jpeg', 'pexels-photo-1844033.jpeg', 'pexels-photo-1846570.jpeg', 'pexels-photo-1847003.jpeg', 'pexels-photo-1852036.jpeg', 'pexels-photo-1852907.jpeg', 'pexels-photo-1853349.jpeg', 'pexels-photo-1854123.jpeg', 'pexels-photo-1857304.jpeg', 'pexels-photo-1857308.jpeg', 'pexels-photo-1858175.jpeg', 'pexels-photo-1861594.jpeg', 'pexels-photo-1868734.jpeg', 'pexels-photo-1868736.jpeg', 'pexels-photo-1874783.jpeg', 'pexels-photo-1885585.jpeg', 'pexels-photo-1889792.jpeg', 'pexels-photo-1892498.jpeg', 'pexels-photo-1893264.jpeg', 'pexels-photo-1903556.jpeg', 'pexels-photo-1925482.jpeg', 'pexels-photo-1928065.jpeg', 'pexels-photo-1928083.jpeg', 'pexels-photo-1930621.jpeg', 'pexels-photo-1934531.jpeg', 'pexels-photo-1934538.jpeg', 'pexels-photo-1934540.jpeg', 'pexels-photo-1934762.jpeg', 'pexels-photo-1934763.jpeg', 'pexels-photo-1935891.jpeg', 'pexels-photo-1936092.jpeg', 'pexels-photo-1937301.png', 'pexels-photo-1945967.jpeg', 'pexels-photo-1958744.jpeg', 'pexels-photo-1966002.jpeg', 'pexels-photo-1973177.jpeg', 'pexels-photo-1977047.jpeg', 'pexels-photo-1978611.jpeg', 'pexels-photo-1983772.jpeg', 'pexels-photo-1984455.jpeg', 'pexels-photo-1987142.jpeg', 'pexels-photo-1996250.jpeg', 'pexels-photo-1996819.jpeg', 'pexels-photo-1998156.jpeg', 'pexels-photo-1999129.jpeg', 'pexels-photo-1999264.jpeg', 'pexels-photo-1999503.jpeg', 'pexels-photo-1999504.jpeg', 'pexels-photo-2003899.jpeg', 'pexels-photo-2008483.jpeg', 'pexels-photo-2017505.jpeg', 'pexels-photo-2020055.jpeg', 'pexels-photo-2020944.jpeg', 'pexels-photo-2030845.jpeg', 'pexels-photo-2030846.jpeg', 'pexels-photo-2030847.jpeg', 'pexels-photo-2032568.jpeg', 'pexels-photo-2033447.jpeg', 'pexels-photo-2035928.jpeg', 'pexels-photo-2036563.jpeg', 'pexels-photo-2048716.jpeg', 'pexels-photo-2050976.jpeg', 'pexels-photo-2050978.jpeg', 'pexels-photo-2050981.jpeg', 'pexels-photo-2050989.jpeg', 'pexels-photo-2050999.jpeg', 'pexels-photo-2057680.jpeg', 'pexels-photo-2058659.jpeg', 'pexels-photo-2059659.jpeg', 'pexels-photo-2060900.jpeg', 'pexels-photo-2061082.jpeg', 'pexels-photo-2063863.jpeg', 'pexels-photo-206505.jpeg', 'pexels-photo-206551.jpeg', 'pexels-photo-2068802.jpeg', 'pexels-photo-207569.jpeg', 'pexels-photo-2077158.jpeg', 'pexels-photo-207777.jpeg', 'pexels-photo-2077958.jpeg', 'pexels-photo-2077961.jpeg', 'pexels-photo-2078265.jpeg', 'pexels-photo-2078321.jpeg', 'pexels-photo-2079819.jpeg', 'pexels-photo-2080571.jpeg', 'pexels-photo-2080734.jpeg', 'pexels-photo-2081887.jpeg', 'pexels-photo-2081889.jpeg', 'pexels-photo-2081893.jpeg', 'pexels-photo-2085247.jpeg', 'pexels-photo-2102710.jpeg', 'pexels-photo-2106220.jpeg', 'pexels-photo-2108918.jpeg', 'pexels-photo-2108926.jpeg', 'pexels-photo-2109743.jpeg', 'pexels-photo-2112710.jpeg', 'pexels-photo-2112722.jpeg', 'pexels-photo-2118870.jpeg', 'pexels-photo-2120096.jpeg', 'pexels-photo-2124943.jpeg', 'pexels-photo-2146705.jpeg', 'pexels-photo-2146720.jpeg', 'pexels-photo-2149622.jpeg', 'pexels-photo-2157086.jpeg', 'pexels-photo-2162307.jpeg', 'pexels-photo-2168394.jpeg', 'pexels-photo-2168400.jpeg', 'pexels-photo-2168791.jpeg', 'pexels-photo-2174725.jpeg', 'pexels-photo-2179962.jpeg', 'pexels-photo-2180346.jpeg', 'pexels-photo-2180474.jpeg', 'pexels-photo-2180537.jpeg', 'pexels-photo-2181790.jpeg', 'pexels-photo-2181871.jpeg', 'pexels-photo-220436.jpeg', 'pexels-photo-2205647.jpeg', 'pexels-photo-2215115.jpeg', 'pexels-photo-2216567.jpeg', 'pexels-photo-2219118.jpeg', 'pexels-photo-2221888.jpeg', 'pexels-photo-2223060.jpeg', 'pexels-photo-2225668.jpeg', 'pexels-photo-2228199.jpeg', 'pexels-photo-2237660.jpeg', 'pexels-photo-2245433.jpeg', 'pexels-photo-2246264.jpeg', 'pexels-photo-2247129.jpeg', 'pexels-photo-2247447.jpeg', 'pexels-photo-2253065.jpeg', 'pexels-photo-2253443.jpeg', 'pexels-photo-2257940.jpeg', 'pexels-photo-227294.jpeg', 'pexels-photo-227335.jpeg', 'pexels-photo-227349.jpeg', 'pexels-photo-2273783.jpeg', 'pexels-photo-2274209.jpeg', 'pexels-photo-2275903.jpeg', 'pexels-photo-2282849.jpeg', 'pexels-photo-2291761.jpeg', 'pexels-photo-2292932.jpeg', 'pexels-photo-2293146.jpeg', 'pexels-photo-2294923.jpeg', 'pexels-photo-2307036.jpeg', 'pexels-photo-2310776.jpeg', 'pexels-photo-2323705.jpeg', 'pexels-photo-2332276.jpeg', 'pexels-photo-2339625.jpeg', 'pexels-photo-2340988.png', 'pexels-photo-2343699.jpeg', 'pexels-photo-2344109.jpeg', 'pexels-photo-2351076.jpeg', 'pexels-photo-2351077.jpeg', 'pexels-photo-2352265.jpeg', 'pexels-photo-2364575.jpeg', 'pexels-photo-2369808.jpeg', 'pexels-photo-2370929.jpeg', 'pexels-photo-2379004.jpeg', 'pexels-photo-2381069.jpeg', 'pexels-photo-2385657.jpeg', 'pexels-photo-2387120.jpeg', 'pexels-photo-2387124.jpeg', 'pexels-photo-2387879.jpeg', 'pexels-photo-2388384.jpeg', 'pexels-photo-2395858.jpeg', 'pexels-photo-2395921.jpeg', 'pexels-photo-2397781.jpeg', 'pexels-photo-2398595.jpeg', 'pexels-photo-2399097.jpeg', 'pexels-photo-2399708.jpeg', 'pexels-photo-2402252.png', 'pexels-photo-2402259.png', 'pexels-photo-2422281.jpeg', 'pexels-photo-2422287.jpeg', 'pexels-photo-2431291.jpeg', 'pexels-photo-2434006.jpeg', 'pexels-photo-2434048.jpeg', 'pexels-photo-2434049.jpeg', 'pexels-photo-2435544.jpeg', 'pexels-photo-2440971.jpeg', 'pexels-photo-2446407.jpeg', 'pexels-photo-2447239.jpeg', 'pexels-photo-2451600.jpeg', 'pexels-photo-2464005.jpeg', 'pexels-photo-2464985.jpeg', 'pexels-photo-2466465.jpeg', 'pexels-photo-2466627.jpeg', 'pexels-photo-2469216.jpeg', 'pexels-photo-2472262.jpeg', 'pexels-photo-2472266.jpeg', 'pexels-photo-2476315.jpeg', 'pexels-photo-2478618.jpeg', 'pexels-photo-2480516.jpeg', 'pexels-photo-2499175.jpeg', 'pexels-photo-2499458.jpeg', 'pexels-photo-2517864.jpeg', 'pexels-photo-2519765.jpeg', 'pexels-photo-2524303.jpeg', 'pexels-photo-2526881.jpeg', 'pexels-photo-2528805.jpeg', 'pexels-photo-2530138.jpeg', 'pexels-photo-2531002.jpeg', 'pexels-photo-2531092.jpeg', 'pexels-photo-2531093.jpeg', 'pexels-photo-2531353.jpeg', 'pexels-photo-2531553.jpeg', 'pexels-photo-2535859.jpeg', 'pexels-photo-2536597.jpeg', 'pexels-photo-2537849.jpeg', 'pexels-photo-2539732.jpeg', 'pexels-photo-2539733.jpeg', 'pexels-photo-2570090.jpeg', 'pexels-photo-2583749.jpeg', 'pexels-photo-2588008.jpeg', 'pexels-photo-2601019.jpeg', 'pexels-photo-260175.jpeg', 'pexels-photo-2602085.jpeg', 'pexels-photo-2602994.jpeg', 'pexels-photo-2605637.jpeg', 'pexels-photo-2605648.jpeg', 'pexels-photo-2612958.jpeg', 'pexels-photo-2612964.jpeg', 'pexels-photo-2612966.jpeg', 'pexels-photo-2612970.jpeg', 'pexels-photo-2612973.jpeg', 'pexels-photo-2616957.jpeg', 'pexels-photo-2616958.jpeg', 'pexels-photo-2635314.jpeg', 'pexels-photo-2635315.jpeg', 'pexels-photo-2646834.jpeg', 'pexels-photo-2664721.jpeg', 'pexels-photo-2669427.jpeg', 'pexels-photo-2669601.jpeg', 'pexels-photo-2691608.jpeg', 'pexels-photo-2701660.jpeg', 'pexels-photo-2710183.jpeg', 'pexels-photo-2713211.jpeg', 'pexels-photo-2717435.jpeg', 'pexels-photo-2717479.jpeg', 'pexels-photo-2719512.jpeg', 'pexels-photo-2728625.jpeg', 'pexels-photo-2737973.jpeg', 'pexels-photo-2737975.jpeg', 'pexels-photo-2737978.jpeg', 'pexels-photo-2738167.jpeg', 'pexels-photo-2748123.jpeg', 'pexels-photo-2754571.jpeg', 'pexels-photo-2764682.jpeg', 'pexels-photo-2766349.jpeg', 'pexels-photo-2766392.jpeg', 'pexels-photo-2766965.jpeg', 'pexels-photo-2767620.jpeg', 'pexels-photo-2768991.jpeg', 'pexels-photo-2769290.jpeg', 'pexels-photo-2769303.jpeg', 'pexels-photo-2769750.jpeg', 'pexels-photo-2769751.jpeg', 'pexels-photo-2769764.jpeg', 'pexels-photo-2769809.jpeg', 'pexels-photo-2770595.jpeg', 'pexels-photo-2770597.jpeg', 'pexels-photo-2771619.jpeg', 'pexels-photo-2773487.jpeg', 'pexels-photo-2773543.jpeg', 'pexels-photo-2773682.jpeg', 'pexels-photo-2773968.jpeg', 'pexels-photo-2774514.jpeg', 'pexels-photo-2776353.png', 'pexels-photo-2778297.jpeg', 'pexels-photo-2780581.jpeg', 'pexels-photo-2781213.jpeg', 'pexels-photo-2789274.jpeg', 'pexels-photo-2792080.jpeg', 'pexels-photo-2808756.jpeg', 'pexels-photo-2813157.jpeg', 'pexels-photo-2820565.jpeg', 'pexels-photo-2820757.jpeg', 'pexels-photo-2822856.jpeg', 'pexels-photo-2830177.jpeg', 'pexels-photo-2830332.jpeg', 'pexels-photo-2833390.jpeg', 'pexels-photo-2842277.jpeg', 'pexels-photo-2846123.jpeg', 'pexels-photo-2846126.jpeg', 'pexels-photo-2851923.jpeg', 'pexels-photo-2852454.jpeg', 'pexels-photo-2852839.jpeg', 'pexels-photo-2853545.jpeg', 'pexels-photo-2860885.jpeg', 'pexels-photo-2860899.jpeg', 'pexels-photo-2861137.jpeg', 'pexels-photo-2861547.jpeg', 'pexels-photo-2861554.jpeg', 'pexels-photo-2861670.jpeg', 'pexels-photo-2861672.jpeg', 'pexels-photo-2865184.jpeg', 'pexels-photo-2866045.jpeg', 'pexels-photo-2866402.jpeg', 'pexels-photo-2869373.jpeg', 'pexels-photo-2874346.jpeg', 'pexels-photo-2875000.jpeg', 'pexels-photo-2882983.jpeg', 'pexels-photo-2882987.jpeg', 'pexels-photo-2883056.jpeg', 'pexels-photo-2883620.jpeg', 'pexels-photo-2883778.jpeg', 'pexels-photo-2884433.jpeg', 'pexels-photo-2886726.jpeg', 'pexels-photo-2887876.jpeg', 'pexels-photo-2887894.jpeg', 'pexels-photo-2887897.jpeg', 'pexels-photo-2888322.jpeg', 'pexels-photo-2889537.jpeg', 'pexels-photo-2890041.jpeg', 'pexels-photo-2896461.jpeg', 'pexels-photo-2897737.jpeg', 'pexels-photo-2899899.jpeg', 'pexels-photo-2899900.jpeg', 'pexels-photo-2905227.jpeg', 'pexels-photo-2905535.jpeg', 'pexels-photo-2911403.jpeg', 'pexels-photo-2917353.jpeg', 'pexels-photo-2919734.jpeg', 'pexels-photo-2921045.jpeg', 'pexels-photo-2929036.jpeg', 'pexels-photo-2929368.jpeg', 'pexels-photo-2929579.jpeg', 'pexels-photo-2936974.jpeg', 'pexels-photo-2937649.jpeg', 'pexels-photo-2939337.jpeg', 'pexels-photo-2943689.jpeg', 'pexels-photo-2946421.jpeg', 'pexels-photo-2947534.jpeg', 'pexels-photo-2952768.jpeg', 'pexels-photo-2952769.jpeg', 'pexels-photo-2952774.jpeg', 'pexels-photo-2952775.jpeg', 'pexels-photo-2956641.jpeg', 'pexels-photo-2956650.jpeg', 'pexels-photo-2961515.jpeg', 'pexels-photo-2961533.jpeg', 'pexels-photo-2962015.jpeg', 'pexels-photo-2962205.jpeg', 'pexels-photo-2962242.jpeg', 'pexels-photo-2964030.jpeg', 'pexels-photo-2965829.jpeg', 'pexels-photo-2966526.jpeg', 'pexels-photo-2970404.jpeg', 'pexels-photo-2977327.jpeg', 'pexels-photo-2978825.jpeg', 'pexels-photo-2980464.jpeg', 'pexels-photo-2994029.jpeg', 'pexels-photo-2995309.jpeg', 'pexels-photo-2996020.jpeg', 'pexels-photo-2997545.jpeg', 'pexels-photo-2997547.jpeg', 'pexels-photo-2998937.jpeg', 'pexels-photo-3002185.jpeg', 'pexels-photo-3007317.jpeg', 'pexels-photo-3009749.jpeg', 'pexels-photo-3009773.jpeg', 'pexels-photo-3014061.jpeg', 'pexels-photo-3014764.jpeg', 'pexels-photo-3016696.jpeg', 'pexels-photo-3019859.jpeg', 'pexels-photo-3020083.jpeg', 'pexels-photo-3021153.jpeg', 'pexels-photo-3021154.jpeg', 'pexels-photo-3021157.jpeg', 'pexels-photo-3026450.jpeg', 'pexels-photo-3026580.jpeg', 'pexels-photo-3027032.jpeg', 'pexels-photo-3030327.jpeg', 'pexels-photo-3030749.jpeg', 'pexels-photo-3031373.jpeg', 'pexels-photo-3040042.jpeg', 'pexels-photo-3045191.jpeg', 'pexels-photo-3047833.jpeg', 'pexels-photo-3048457.jpeg', 'pexels-photo-3049162.jpeg', 'pexels-photo-3049165.jpeg', 'pexels-photo-3049718.jpeg', 'pexels-photo-3049724.jpeg', 'pexels-photo-3051600.jpeg', 'pexels-photo-3051601.jpeg', 'pexels-photo-3051607.jpeg', 'pexels-photo-3052347.jpeg', 'pexels-photo-3052348.jpeg', 'pexels-photo-3052357.jpeg', 'pexels-photo-3052358.jpeg', 'pexels-photo-3054052.jpeg', 'pexels-photo-3057765.jpeg', 'pexels-photo-3059264.jpeg', 'pexels-photo-3062930.jpeg', 'pexels-photo-3063409.jpeg', 'pexels-photo-3063572.jpeg', 'pexels-photo-3064681.jpeg', 'pexels-photo-3075063.jpeg', 'pexels-photo-3075499.jpeg', 'pexels-photo-3081575.jpeg', 'pexels-photo-3085110.jpeg', 'pexels-photo-3087002.jpeg', 'pexels-photo-3091137.jpeg', 'pexels-photo-3093711.jpeg', 'pexels-photo-3094216.jpeg', 'pexels-photo-3094394.jpeg', 'pexels-photo-3094472.jpeg', 'pexels-photo-3094489.jpeg', 'pexels-photo-3094742.jpeg', 'pexels-photo-3094743.jpeg', 'pexels-photo-3094744.jpeg', 'pexels-photo-3094745.jpeg', 'pexels-photo-3094746.jpeg', 'pexels-photo-3097527.jpeg', 'pexels-photo-3098968.jpeg', 'pexels-photo-3098974.jpeg', 'pexels-photo-3099715.jpeg', 'pexels-photo-3101634.jpeg', 'pexels-photo-3102394.jpeg', 'pexels-photo-3107671.jpeg', 'pexels-photo-3110027.jpeg', 'pexels-photo-3110356.jpeg', 'pexels-photo-3115835.jpeg', 'pexels-photo-3118650.jpeg', 'pexels-photo-3124946.jpeg', 'pexels-photo-3128835.jpeg', 'pexels-photo-3130392.jpeg', 'pexels-photo-3131473.jpeg', 'pexels-photo-3141261.jpeg', 'pexels-photo-3142958.jpeg', 'pexels-photo-3142972.jpeg', 'pexels-photo-3156608.jpeg', 'pexels-photo-3159285.jpeg', 'pexels-photo-3159568.jpeg', 'pexels-photo-3159938.jpeg', 'pexels-photo-3171625.jpeg', 'pexels-photo-3179215.jpeg', 'pexels-photo-3181433.jpeg', 'pexels-photo-3181434.jpeg', 'pexels-photo-3181438.jpeg', 'pexels-photo-3182741.jpeg', 'pexels-photo-3182746.jpeg', 'pexels-photo-3182816.jpeg', 'pexels-photo-3183154.jpeg', 'pexels-photo-3184295.jpeg', 'pexels-photo-3184312.jpeg', 'pexels-photo-3184400.jpeg', 'pexels-photo-3184456.jpeg', 'pexels-photo-3184585.jpeg', 'pexels-photo-3186970.jpeg', 'pexels-photo-3188553.jpeg', 'pexels-photo-3188577.jpeg', 'pexels-photo-3189229.jpeg', 'pexels-photo-3189231.jpeg', 'pexels-photo-3189240.jpeg', 'pexels-photo-3189274.jpeg', 'pexels-photo-3193344.jpeg', 'pexels-photo-3197569.jpeg', 'pexels-photo-3201720.jpeg', 'pexels-photo-3205253.jpeg', 'pexels-photo-3206114.jpeg', 'pexels-photo-3206122.jpeg', 'pexels-photo-3207130.jpeg', 'pexels-photo-3207967.jpeg', 'pexels-photo-3211236.jpeg', 'pexels-photo-3218048.jpeg', 'pexels-photo-3221005.jpeg', 'pexels-photo-3221010.jpeg', 'pexels-photo-3221847.png', 'pexels-photo-3222452.jpeg', 'pexels-photo-3225496.jpeg', 'pexels-photo-3225697.jpeg', 'pexels-photo-3226682.jpeg', 'pexels-photo-3228725.jpeg', 'pexels-photo-3228728.jpeg', 'pexels-photo-3228740.jpeg', 'pexels-photo-3228760.jpeg', 'pexels-photo-3228835.jpeg', 'pexels-photo-3228844.jpeg', 'pexels-photo-3228847.jpeg', 'pexels-photo-3228858.jpeg', 'pexels-photo-3228865.jpeg', 'pexels-photo-3228866.jpeg', 'pexels-photo-3228884.jpeg', 'pexels-photo-3228901.jpeg', 'pexels-photo-3228912.jpeg', 'pexels-photo-3228921.jpeg', 'pexels-photo-3228935.jpeg', 'pexels-photo-322920.jpeg', 'pexels-photo-3230316.jpeg', 'pexels-photo-3232714.jpeg', 'pexels-photo-324658.jpeg', 'pexels-photo-3250151.jpeg', 'pexels-photo-3250742.jpeg', 'pexels-photo-3251131.jpeg', 'pexels-photo-3255915.jpeg', 'pexels-photo-3259918.jpeg', 'pexels-photo-3262906.jpeg', 'pexels-photo-3265547.jpeg', 'pexels-photo-3265548.jpeg', 'pexels-photo-3268528.jpeg', 'pexels-photo-3268529.jpeg', 'pexels-photo-3270979.jpeg', 'pexels-photo-3275945.jpeg', 'pexels-photo-3280133.jpeg', 'pexels-photo-3283406.jpeg', 'pexels-photo-3284698.jpeg', 'pexels-photo-3285727.jpeg', 'pexels-photo-3289167.jpeg', 'pexels-photo-3290230.jpeg', 'pexels-photo-3290236.jpeg', 'pexels-photo-3290250.jpeg', 'pexels-photo-3290300.jpeg', 'pexels-photo-3292231.jpeg', 'pexels-photo-3292701.jpeg', 'pexels-photo-3299459.jpeg', 'pexels-photo-3307253.jpeg', 'pexels-photo-3314617.jpeg', 'pexels-photo-3314618.jpeg', 'pexels-photo-3318440.jpeg', 'pexels-photo-3318444.jpeg', 'pexels-photo-3318459.jpeg', 'pexels-photo-3318471.jpeg', 'pexels-photo-3319056.jpeg', 'pexels-photo-3319789.jpeg', 'pexels-photo-3321537.jpeg', 'pexels-photo-3321798.jpeg', 'pexels-photo-3323567.jpeg', 'pexels-photo-3326501.jpeg', 'pexels-photo-3329488.jpeg', 'pexels-photo-3335344.jpeg', 'pexels-photo-3336057.jpeg', 'pexels-photo-3341576.jpeg', 'pexels-photo-3341804.jpeg', 'pexels-photo-3341806.jpeg', 'pexels-photo-3341807.jpeg', 'pexels-photo-3342981.jpeg', 'pexels-photo-3344287.jpeg', 'pexels-photo-3353573.jpeg', 'pexels-photo-3355028.jpeg', 'pexels-photo-3355032.jpeg', 'pexels-photo-3355806.jpeg', 'pexels-photo-3361438.jpeg', 'pexels-photo-3369034.jpeg', 'pexels-photo-3370324.jpeg', 'pexels-photo-3373368.jpeg', 'pexels-photo-3373399.jpeg', 'pexels-photo-3375270.jpeg', 'pexels-photo-3375603.jpeg', 'pexels-photo-3377788.jpeg', 'pexels-photo-3386734.jpeg', 'pexels-photo-3386736.jpeg', 'pexels-photo-3394168.jpeg', 'pexels-photo-3394661.jpeg', 'pexels-photo-3400090.jpeg', 'pexels-photo-3402476.jpeg', 'pexels-photo-3402700.jpeg', 'pexels-photo-341520.jpeg', 'pexels-photo-388514.jpeg', 'pexels-photo-421884.jpeg', 'pexels-photo-459953.jpeg', 'pexels-photo-555790.png', 'pexels-photo-556069.jpeg', 'pexels-photo-569163.jpeg', 'pexels-photo-573259.jpeg', 'pexels-photo-594693.jpeg', 'pexels-photo-594694.jpeg', 'pexels-photo-616953.jpeg', 'pexels-photo-670239.jpeg', 'pexels-photo-672444.jpeg', 'pexels-photo-681830.jpeg', 'pexels-photo-694556.jpeg', 'pexels-photo-698569.jpeg', 'pexels-photo-704360.jpeg', 'pexels-photo-711154.jpeg', 'pexels-photo-713959.jpeg', 'pexels-photo-723900.jpeg', 'pexels-photo-731070.jpeg', 'pexels-photo-735308.jpeg', 'pexels-photo-739662.jpeg', 'pexels-photo-745115.jpeg', 'pexels-photo-745119.jpeg', 'pexels-photo-752801.jpeg', 'pexels-photo-752803.jpeg', 'pexels-photo-754769.jpeg', 'pexels-photo-756453.jpeg', 'pexels-photo-758857.jpeg', 'pexels-photo-758863.jpeg', 'pexels-photo-762041.jpeg', 'pexels-photo-765220.png', 'pexels-photo-768114.jpeg', 'pexels-photo-769036.jpeg', 'pexels-photo-769746.jpeg', 'pexels-photo-769768.jpeg', 'pexels-photo-774095.jpeg', 'pexels-photo-774866.jpeg', 'pexels-photo-774909.jpeg', 'pexels-photo-775358.jpeg', 'pexels-photo-777155.jpeg', 'pexels-photo-786220.jpeg', 'pexels-photo-789304.jpeg', 'pexels-photo-789822.jpeg', 'pexels-photo-790944.jpeg', 'pexels-photo-795749.jpeg', 'pexels-photo-795813.jpeg', 'pexels-photo-799957.jpeg', 'pexels-photo-803277.jpeg', 'pexels-photo-819836.png', 'pexels-photo-819844.png', 'pexels-photo-824111.jpeg', 'pexels-photo-825996.jpeg', 'pexels-photo-842567.jpeg', 'pexels-photo-845413.jpeg', 'pexels-photo-846741.jpeg', 'pexels-photo-863935.jpeg', 'pexels-photo-863974.jpeg', 'pexels-photo-864994.jpeg', 'pexels-photo-866019.jpeg', 'pexels-photo-868113.jpeg', 'pexels-photo-880806.jpeg', 'pexels-photo-886100.jpeg', 'pexels-photo-888779.jpeg', 'pexels-photo-899738.jpeg', 'pexels-photo-899753.jpeg', 'pexels-photo-901971.jpeg', 'pexels-photo-911593.jpeg', 'pexels-photo-911627.jpeg', 'pexels-photo-91227.jpeg', 'pexels-photo-918457.jpeg', 'pexels-photo-920378.jpeg', 'pexels-photo-920386.jpeg', 'pexels-photo-920387.jpeg', 'pexels-photo-923310.jpeg', 'pexels-photo-923657.jpeg', 'pexels-photo-927022.jpeg', 'pexels-photo-927523.jpeg', 'pexels-photo-933964.jpeg', 'pexels-photo-935762.jpeg', 'pexels-photo-935988.jpeg', 'pexels-photo-936058.jpeg', 'pexels-photo-936069.jpeg', 'pexels-photo-936073.jpeg', 'pexels-photo-936075.jpeg', 'pexels-photo-936092.jpeg', 'pexels-photo-936560.jpeg', 'pexels-photo-937416.jpeg', 'pexels-photo-941693.jpeg', 'pexels-photo-952016.jpeg', 'pexels-photo-954897.jpeg', 'pexels-photo-961425.jpeg', 'pexels-photo-962355.jpeg', 'pexels-photo-968281.jpeg', 'pexels-photo-972278.jpeg', 'pexels-photo-972995.jpeg', 'pexels-photo-974327.jpeg', 'pexels-photo-981104.jpeg', 'pexels-photo-983564.jpeg', 'pexels-photo-983570.jpeg', 'pexels-photo-983573.jpeg', 'pexels-photo-993717.jpeg', 'softball-girls-team-mates-happy-163465.jpeg']

class QuotesSpider(scrapy.Spider):
    name = "physics"

    def __init__(self):
        self.dt = detector.FaceManipulator()

    def start_requests(self):
        keyword = "smile"  # search for keyword smile in www.pexels.com
        urls = [  # specify the urls to scrap
            "https://www.pexels.com/search/"+keyword
        ]
        for url in urls:  # send requests
            yield scrapy.Request(url=url, callback=self.parse)

    def parse(self, response):
        # get all image urls from the scraped file
        # NOTE: This commented line is previously used to get the "raw" image
        # image_urls = response.css(".photo-item__img::attr(srcset)").getall()
        # NOTE: but for performance reason, we decided to reused what we've already got
        # and try to let the server compress the image for us
        # note that we can also get a performance boost by manipulating a smaller image
        # more importantly, my memory can finally have the ability to handle this awkward situation
        imgs = response.css(".photo-item__img")
        # NOTE: if we use small data, there's no need to process urls beforehand

        for img in imgs:
            image_url = img.css("img::attr(data-tiny-src)").get()
            ord_width = img.css("img::attr(data-image-width)").get()
            if image_url.split('?')[0].split('/')[-1] not in already_here:
                yield scrapy.Request(url=image_url, callback=self.process_img, meta={"ori_width":ord_width})

    def process_img(self, response):
        # try to decode the image using opencv
        ar = np.asarray(bytearray(response.body))
        self.dt.img = cv2.imdecode(ar, cv2.IMREAD_COLOR)
        if self.dt.detect_face(ratio=response.meta["ori_width"]//500):
            self.dt.get_edge()
            # if the small image looks good, get the big one
            # first rename your url
            try:
                url = response.url.split("?")[0]  # get the right image url
            except:
                print("Wrong url")
                url = ""  # if we've got the wrong url, clear it so scrapy won't process it
            r = rq.get(url) # the line get the large file for processing
            ar = np.asarray(bytearray(r.content))
            img = cv2.imdecode(ar, cv2.IMREAD_COLOR)
            width = img.shape[1]  # get the width of the image
            # in the request url for the small image, we've got the width to be 500 pixels
            left = self.dt.left * width // 500
            right = self.dt.right * width // 500
            up = self.dt.up * width // 500
            down = self.dt.down * width // 500
            img = img[up:down, left:right]
            # the return value of img.shape is like (row_number, col_number, color_number)
            # and what we need is the column number (width)
            # get file name for writing
            try:
                f_name = url.split("/")[-1]  # get the file name from the url
            except:
                print("Wrong url")
                f_name = "default_name"  # use default name if the url is corrupted
            # use cv2.imwrite to save current data
            cv2.imwrite(f_name, img)
